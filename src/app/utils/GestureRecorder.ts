// Port From
// Z:\_source\FirstBorn\MandarinTranslations\lib-src\com\zehfernando\input\GestureRecorder.as
// import * as PIXI from 'pixi.js/dist/pixi.min.js';
// import {Point, Rectangle} from 'pixi.js/dist/pixi.min.js';
import {Point, Rectangle} from 'pixi.js';
import {THROW_IF_NOT_FOUND} from '@angular/core/src/di/injector';


const EVENT_GESTURE_COMPLETED = 'onGestureCompleted';

export class Path {

  public points: Point[] = new Array();

  constructor() {
  }

  public fromPoints(__points: Point[], __clone: Boolean = true, __optimize: Boolean = false): Path {
    var path: Path = new Path();
    if (__clone) {
      for (var i = 0; i < __points.length; i++)
        path.points.push(__points[i]);
    } else {
      path.points = __points;
    }
    if (__optimize) path.simplify();
    return path;
  }

  public static fromCoordinatesArray(__coordinates: number[], __optimize: Boolean = false): Path {
    var path: Path = new Path();
    for (var i = 0; i < __coordinates.length; i += 2) path.points.push(new Point(__coordinates[i], __coordinates[i + 1]));
    if (__optimize) path.simplify();
    return path;
  }

  clone(): Path {
    return this.fromPoints(this.points, true);
  }

  simplify(): void {
    // Simplify the path by removing middle points in lines that have the same angle
    //			var pl:int = points.length;
    // TODO: better understood closed loops
    for (var i = 1; i < this.points.length - 1; i++) {
      if (this.points[i].equals(this.points[i - 1]) || Math.atan2(this.points[i].y - this.points[i - 1].y, this.points[i].x - this.points[i - 1].x) == Math.atan2(this.points[i + 1].y - this.points[i].y, this.points[i + 1].x - this.points[i].x)) {
        // Same point or same angle
        this.points.splice(i, 1);
        i--;
      }
    }
  }

  getBounds(): Rectangle {
    // Find the bounds of all the points in the path
    var i: number;
    var minX: number;
    var maxX: number;
    var minY: number;
    var maxY: number;

    // Read minimum and maximums
    for (i = 0; i < this.points.length; i++) {
      if (isNaN(minX) || this.points[i].x < minX) minX = this.points[i].x;
      if (isNaN(maxX) || this.points[i].x > maxX) maxX = this.points[i].x;
      if (isNaN(minY) || this.points[i].y < minY) minY = this.points[i].y;
      if (isNaN(maxY) || this.points[i].y > maxY) maxY = this.points[i].y;
    }

    return new Rectangle(minX, minY, maxX - minX, maxY - minY);
  }

  normalize(): void {
    // Make sures all coordinates are from 0 to 1 by scaling the whole path back

    var bounds: Rectangle = this.getBounds();
    var i: number;

    // Apply mapped values
    for (i = 0; i < this.points.length; i++) {
      this.points[i].set((this.points[i].x - bounds.x) / bounds.width, (this.points[i].y - bounds.y) / bounds.height);
      // this.points[i].x = (this.points[i].x - bounds.x) / bounds.width;
      // this.points[i].y = (this.points[i].y - bounds.y) / bounds.height;
    }
  }

  get length(): number {
    var l: number = 0;
    for (var i = 0; i < this.points.length - 1; i++) {
      l += Path.distance(this.points[i], this.points[i + 1]);
    }
    return l;
  }

  public static distance(_p1: Point, _p2: Point): number {
    if (_p1 && _p2) {
      return Math.sqrt((_p1.x - _p2.x) * (_p1.x - _p2.x) + (_p1.y - _p2.y) * (_p1.y - _p2.y));
    }
    return 0;
  }

  public static interpolate(_p1: Point, _p2: Point, f: number): Point {
    if (_p1 && _p2) {
      var newp: Point = new Point(0, 0);
      newp.set(_p1.x * f + _p2.x * (1 - f), _p1.y * f + _p2.y * (1 - f));
      return newp;
    }
    return new Point(0, 0);
  }

  getPosition(__position: number): Point {
    // Returns a point in this position in the path (0 to length)
    if (__position <= 0) return this.points[0];

    var p: number = 0;
    var l: number;
    for (var i = 0; i < this.points.length - 1; i++) {
      l = Path.distance(this.points[i], this.points[i + 1]);
      if (p <= __position && p + l >= __position) {
        return Path.interpolate(this.points[i + 1], this.points[i], (__position - p) / l);
      }
      p += l;
    }

    return this.points[this.points.length - 1];
  }

  getSimilarity(this, __path1: Path): number {
    // Return the similarity between two paths, by measuring the distance of points at the same breakpoints in the path
    // simplify() and normalize() the paths before calling this function!
    // 0 = identical
    // Higher = more different
    var numSegs: number = 80; // Number of segments to check (more = more precise, less = faster)

    var errorDrift: number = 0;

    var l0: number = this.length;
    var l1: number = __path1.length;

    for (var i = 0; i <= numSegs; i++) {
      errorDrift += Path.distance(this.getPosition((i / numSegs) * l0), __path1.getPosition((i / numSegs) * l1));
    }
    return errorDrift / numSegs;
  }

  translate(__x: number, __y: number): void {
    // Moves all points by a certain amount
    var i;
    for (i = 0; i < this.points.length; i++) {
      this.points[i].set(this.points[i].x + __x, this.points[i].y + __y);
      // this.points[i].x = this.points[i].x + __x;
      // this.points[i].y = this.points[i].y + __y;
    }
  }

  scale(__scaleX: number, __scaleY: number, __pivot: Point = null): void {
    // Moves all points by a certain amount
    var i;
    if (__pivot == null) __pivot = new Point(0, 0);
    for (i = 0; i < this.points.length; i++) {
      this.points[i].set((this.points[i].x - __pivot.x) * __scaleX + __pivot.x, (this.points[i].y - __pivot.y) * __scaleY + __pivot.y);
      // this.points[i].x = (this.points[i].x - __pivot.x) * __scaleX + __pivot.x;
      // this.points[i].y = (this.points[i].y - __pivot.y) * __scaleY + __pivot.y;
    }
  }
}

export class GestureRecorder {

  // Static constants
  knownGestures: Path[][];
  knownGestureIds: String[];

  // Properties
  _isRecording: Boolean;

  maxStrokes: number;					// Max stroke to keep (for multi-stroke gesture recognition)

  previousStrokesRaw: Path[];
  previousStrokesNormalized: Path[];

  currentStroke: Point[];
  previousGestureId: String;

  minimumHeight: Number;					// Used when judging multi-stroke gestures
  minimumWidth: Number;					// Used when judging multi-stroke gestures
  minimumLength: Number;					// Used on every stroke

  constructor() {
    this.maxStrokes = 3;
    this.currentStroke = null;
    this.previousGestureId = null;

    this.previousStrokesRaw = new Array();
    this.previousStrokesNormalized = new Array();

    this.minimumHeight = 0.5;					// Used when judging multi-stroke gestures
    this.minimumWidth = 0.5;					// Used when judging multi-stroke gestures
    this.minimumLength = 1;

    // Create list of known gestures
    this.knownGestures = new Array();
    this.knownGestureIds = new Array();

    // These paths must be normalized!
    this.knownGestures.push([Path.fromCoordinatesArray([0, 1, 0, 0.9956030150753769, 0.001282051282051282, 0.9912060301507538, 0.001282051282051282, 0.9861809045226131, 0.002564102564102564, 0.9798994974874372, 0.002564102564102564, 0.9736180904522613, 0.0038461538461538464, 0.9660804020100503, 0.005128205128205128, 0.9597989949748744, 0.007692307692307693, 0.9528894472361809, 0.008974358974358974, 0.946608040201005, 0.008974358974358974, 0.907035175879397, 0.007692307692307693, 0.8969849246231156, 0.007692307692307693, 0.8586683417085427, 0.008974358974358974, 0.8511306532663316, 0.01282051282051282, 0.8423366834170855, 0.014102564102564103, 0.8341708542713567, 0.015384615384615385, 0.8222361809045227, 0.016666666666666666, 0.8165829145728644, 0.019230769230769232, 0.8109296482412061, 0.019230769230769232, 0.8059045226130653, 0.020512820512820513, 0.7989949748743719, 0.020512820512820513, 0.7933417085427136, 0.023076923076923078, 0.7870603015075377, 0.02564102564102564, 0.7782663316582915, 0.026923076923076925, 0.7726130653266332, 0.029487179487179487, 0.7625628140703518, 0.03076923076923077, 0.7569095477386935, 0.03076923076923077, 0.7518844221105527, 0.03333333333333333, 0.7361809045226131, 0.03333333333333333, 0.5998743718592965, 0.03205128205128205, 0.5879396984924623, 0.03076923076923077, 0.5772613065326633, 0.03076923076923077, 0.5559045226130653, 0.03205128205128205, 0.5458542713567839, 0.03333333333333333, 0.5376884422110553, 0.03333333333333333, 0.5207286432160804, 0.03205128205128205, 0.5150753768844221, 0.03076923076923077, 0.5100502512562815, 0.03076923076923077, 0.5062814070351759, 0.028205128205128206, 0.49874371859296485, 0.028205128205128206, 0.45226130653266333, 0.026923076923076925, 0.4428391959798995, 0.03461538461538462, 0.41896984924623115, 0.03717948717948718, 0.40766331658291455, 0.03717948717948718, 0.3957286432160804, 0.038461538461538464, 0.38253768844221103, 0.038461538461538464, 0.31972361809045224, 0.03974358974358974, 0.3046482412060301, 0.03974358974358974, 0.27386934673366836, 0.038461538461538464, 0.2613065326633166, 0.035897435897435895, 0.24811557788944724, 0.03461538461538462, 0.23743718592964824, 0.03333333333333333, 0.22110552763819097, 0.03333333333333333, 0.1934673366834171, 0.028205128205128206, 0.1771356783919598, 0.026923076923076925, 0.16959798994974876, 0.026923076923076925, 0.14384422110552764, 0.02564102564102564, 0.13630653266331658, 0.02564102564102564, 0.06092964824120603, 0.026923076923076925, 0.05339195979899498, 0.026923076923076925, 0.04271356783919598, 0.028205128205128206, 0.035804020100502515, 0.028205128205128206, 0.010050251256281407, 0.029487179487179487, 0.005653266331658292, 0.029487179487179487, 0.0043969849246231155, 0.03076923076923077, 0.002512562814070352, 0.03076923076923077, 0, 0.03205128205128205, 0, 0.03205128205128205, 0.001256281407035176, 0.03333333333333333, 0.002512562814070352, 0.03333333333333333, 0.005025125628140704, 0.03461538461538462, 0.008165829145728644, 0.038461538461538464, 0.01193467336683417, 0.041025641025641026, 0.016331658291457288, 0.046153846153846156, 0.025753768844221106, 0.04871794871794872, 0.03077889447236181, 0.05641025641025641, 0.042085427135678394, 0.06153846153846154, 0.04836683417085427, 0.06794871794871794, 0.05527638190954774, 0.07307692307692308, 0.06155778894472362, 0.07692307692307693, 0.06658291457286432, 0.08205128205128205, 0.07097989949748744, 0.0858974358974359, 0.07600502512562814, 0.09230769230769231, 0.08165829145728644, 0.09871794871794871, 0.08793969849246232, 0.10384615384615385, 0.09233668341708542, 0.10897435897435898, 0.0986180904522613, 0.11282051282051282, 0.10364321608040201, 0.11666666666666667, 0.1099246231155779, 0.12307692307692308, 0.11620603015075377, 0.12692307692307692, 0.12123115577889447, 0.1294871794871795, 0.12688442211055276, 0.13333333333333333, 0.13253768844221106, 0.13846153846153847, 0.13756281407035176, 0.14102564102564102, 0.14258793969849246, 0.14487179487179488, 0.14761306532663315, 0.15, 0.15263819095477388, 0.15384615384615385, 0.15766331658291458, 0.1564102564102564, 0.1620603015075377, 0.15897435897435896, 0.16771356783919597, 0.16153846153846155, 0.1727386934673367, 0.16666666666666666, 0.1777638190954774, 0.16794871794871793, 0.1827889447236181, 0.17051282051282052, 0.1865577889447236, 0.17307692307692307, 0.18969849246231155, 0.17564102564102563, 0.19409547738693467, 0.1794871794871795, 0.1984924623115578, 0.18461538461538463, 0.20728643216080403, 0.18846153846153846, 0.21168341708542712, 0.191025641025641, 0.21608040201005024, 0.20256410256410257, 0.23178391959798994, 0.21025641025641026, 0.24120603015075376, 0.21666666666666667, 0.24937185929648242, 0.2205128205128205, 0.25816582914572866, 0.23974358974358975, 0.29020100502512564, 0.24358974358974358, 0.2952261306532663, 0.24743589743589745, 0.3015075376884422, 0.2512820512820513, 0.3071608040201005, 0.2564102564102564, 0.31972361809045224, 0.2653846153846154, 0.3297738693467337, 0.2743589743589744, 0.34045226130653267, 0.28076923076923077, 0.3542713567839196, 0.28974358974358977, 0.36683417085427134, 0.29615384615384616, 0.3793969849246231, 0.3038461538461538, 0.3913316582914573, 0.3076923076923077, 0.396356783919598, 0.3269230769230769, 0.41708542713567837, 0.3346153846153846, 0.4271356783919598, 0.33974358974358976, 0.4353015075376884, 0.3474358974358974, 0.4428391959798995, 0.3525641025641026, 0.44974874371859297, 0.35512820512820514, 0.45414572864321606, 0.358974358974359, 0.45791457286432163, 0.36153846153846153, 0.4610552763819096, 0.36538461538461536, 0.4692211055276382, 0.37051282051282053, 0.47613065326633164, 0.38846153846153847, 0.5025125628140703, 0.39487179487179486, 0.5131909547738693, 0.4, 0.5201005025125628, 0.4064102564102564, 0.5270100502512562, 0.4115384615384615, 0.5314070351758794, 0.41410256410256413, 0.5364321608040201, 0.41923076923076924, 0.5414572864321608, 0.41923076923076924, 0.5420854271356784, 0.4205128205128205, 0.5408291457286433, 0.4230769230769231, 0.5364321608040201, 0.4256410256410256, 0.5314070351758794, 0.42948717948717946, 0.5219849246231156, 0.4358974358974359, 0.5131909547738693, 0.44358974358974357, 0.5037688442211056, 0.44871794871794873, 0.4949748743718593, 0.4551282051282051, 0.48743718592964824, 0.46025641025641023, 0.4792713567839196, 0.4756410256410256, 0.4623115577889447, 0.4782051282051282, 0.4591708542713568, 0.48717948717948717, 0.45037688442211055, 0.4948717948717949, 0.44221105527638194, 0.5038461538461538, 0.43404522613065327, 0.5089743589743589, 0.4265075376884422, 0.514102564102564, 0.417713567839196, 0.5192307692307693, 0.4082914572864322, 0.5243589743589744, 0.40389447236180903, 0.532051282051282, 0.3944723618090452, 0.5384615384615384, 0.3869346733668342, 0.5474358974358975, 0.37814070351758794, 0.5551282051282052, 0.3712311557788945, 0.5641025641025641, 0.36432160804020103, 0.5807692307692308, 0.3479899497487437, 0.5884615384615385, 0.3385678391959799, 0.6012820512820513, 0.3278894472361809, 0.6115384615384616, 0.3203517587939699, 0.6205128205128205, 0.31155778894472363, 0.6307692307692307, 0.3021356783919598, 0.6487179487179487, 0.2832914572864322, 0.6576923076923077, 0.27324120603015073, 0.6628205128205128, 0.26821608040201006, 0.6756410256410257, 0.25879396984924624, 0.6846153846153846, 0.25, 0.6961538461538461, 0.24057788944723618, 0.7217948717948718, 0.22298994974874373, 0.7307692307692307, 0.21545226130653267, 0.7423076923076923, 0.2079145728643216, 0.7589743589743589, 0.19472361809045227, 0.7653846153846153, 0.1884422110552764, 0.7705128205128206, 0.1815326633165829, 0.7794871794871795, 0.17399497487437185, 0.7897435897435897, 0.1658291457286432, 0.7987179487179488, 0.15891959798994976, 0.8115384615384615, 0.1507537688442211, 0.8166666666666667, 0.146356783919598, 0.8205128205128205, 0.14258793969849246, 0.8256410256410256, 0.13881909547738694, 0.8346153846153846, 0.13128140703517588, 0.841025641025641, 0.12437185929648241, 0.8448717948717949, 0.11809045226130653, 0.8551282051282051, 0.10552763819095477, 0.8602564102564103, 0.0986180904522613, 0.8666666666666667, 0.08919597989949749, 0.8717948717948718, 0.08417085427135679, 0.8769230769230769, 0.07977386934673367, 0.8794871794871795, 0.07349246231155779, 0.882051282051282, 0.06972361809045226, 0.8846153846153846, 0.06532663316582915, 0.8910256410256411, 0.06030150753768844, 0.8948717948717949, 0.055904522613065326, 0.9, 0.05150753768844221, 0.9051282051282051, 0.04773869346733668, 0.908974358974359, 0.04459798994974874, 0.9128205128205128, 0.04082914572864322, 0.9230769230769231, 0.032663316582914576, 0.926923076923077, 0.028894472361809045, 0.9371794871794872, 0.02386934673366834, 0.9397435897435897, 0.02198492462311558, 0.9423076923076923, 0.019472361809045227, 0.9423076923076923, 0.035804020100502515, 0.941025641025641, 0.04396984924623116, 0.9384615384615385, 0.05527638190954774, 0.9371794871794872, 0.06595477386934673, 0.9371794871794872, 0.09045226130653267, 0.9384615384615385, 0.10301507537688442, 0.9397435897435897, 0.10866834170854271, 0.9397435897435897, 0.114321608040201, 0.941025641025641, 0.12437185929648241, 0.941025641025641, 0.14824120603015076, 0.9435897435897436, 0.1658291457286432, 0.9474358974358974, 0.1878140703517588, 0.95, 0.1972361809045226, 0.9525641025641025, 0.21482412060301506, 0.9538461538461539, 0.22487437185929648, 0.9576923076923077, 0.25, 0.9628205128205128, 0.271356783919598, 0.9653846153846154, 0.2814070351758794, 0.9717948717948718, 0.3027638190954774, 0.9730769230769231, 0.31344221105527637, 0.9743589743589743, 0.32474874371859297, 0.9769230769230769, 0.3498743718592965, 0.9807692307692307, 0.3699748743718593, 0.982051282051282, 0.3951005025125628, 0.985897435897436, 0.41896984924623115, 0.9871794871794872, 0.4371859296482412, 0.9897435897435898, 0.4566582914572864, 0.9884615384615385, 0.47675879396984927, 0.9897435897435898, 0.4981155778894472, 0.9935897435897436, 0.5150753768844221, 0.9948717948717949, 0.532035175879397, 0.9974358974358974, 0.5527638190954773, 0.9987179487179487, 0.5703517587939698, 1, 0.5904522613065326, 0.9974358974358974, 0.6099246231155779, 0.9961538461538462, 0.6319095477386935, 0.9961538461538462, 0.6513819095477387, 0.9974358974358974, 0.6689698492462312, 1, 0.6878140703517588, 1, 0.7273869346733668, 0.9974358974358974, 0.7462311557788944, 0.9948717948717949, 0.7657035175879398, 0.9923076923076923, 0.8008793969849246, 0.9910256410256411, 0.8140703517587939, 0.9910256410256411, 0.8285175879396985, 0.9897435897435898, 0.8391959798994975, 0.9871794871794872, 0.8536432160804021, 0.9846153846153847, 0.8699748743718593, 0.9846153846153847, 0.8925879396984925, 0.9833333333333333, 0.9064070351758794, 0.9807692307692307, 0.9183417085427136, 0.9807692307692307, 0.9202261306532663, 0.9794871794871794, 0.9271356783919598, 0.9794871794871794, 0.9340452261306532, 0.9807692307692307, 0.9422110552763819, 0.9807692307692307, 0.9798994974874372, 0.9794871794871794, 0.9817839195979899, 0.9794871794871794, 0.9842964824120602, 0.9782051282051282, 0.9855527638190955, 0.9782051282051282, 0.9868090452261307, 0.9756410256410256, 0.989321608040201, 0.9756410256410256, 0.9899497487437185, 0.9743589743589743, 0.9899497487437185, 0.9743589743589743, 0.9905778894472361])]);
    this.knownGestureIds.push('M');
    this.knownGestures.push([Path.fromCoordinatesArray([0.00340522133938706, 0.006622516556291391, 0.0170261066969353, 0.006622516556291391, 0.022701475595913734, 0.007947019867549669, 0.036322360953461974, 0.013245033112582781, 0.04086265607264472, 0.013245033112582781, 0.04540295119182747, 0.01456953642384106, 0.0510783200908059, 0.01456953642384106, 0.05902383654937571, 0.015894039735099338, 0.08967082860385925, 0.015894039735099338, 0.09875141884222474, 0.01456953642384106, 0.10669693530079455, 0.01456953642384106, 0.1191827468785471, 0.013245033112582781, 0.13166855845629966, 0.010596026490066225, 0.1452894438138479, 0.010596026490066225, 0.16685584562996594, 0.009271523178807948, 0.17253121452894438, 0.007947019867549669, 0.2213393870601589, 0.007947019867549669, 0.24517593643586832, 0.006622516556291391, 0.2917139614074915, 0.006622516556291391, 0.300794551645857, 0.007947019867549669, 0.3087400681044268, 0.009271523178807948, 0.32009080590238365, 0.010596026490066225, 0.33030646992054485, 0.013245033112582781, 0.337116912599319, 0.013245033112582781, 0.35414301929625425, 0.01456953642384106, 0.4267877412031782, 0.01456953642384106, 0.4392735527809308, 0.013245033112582781, 0.44948921679909193, 0.011920529801324504, 0.47559591373439275, 0.011920529801324504, 0.4869466515323496, 0.010596026490066225, 0.5096481271282634, 0.010596026490066225, 0.5278093076049943, 0.009271523178807948, 0.5482406356413166, 0.009271523178807948, 0.5573212258796821, 0.007947019867549669, 0.565266742338252, 0.007947019867549669, 0.5732122587968218, 0.009271523178807948, 0.583427922814983, 0.009271523178807948, 0.5925085130533485, 0.010596026490066225, 0.6061293984108967, 0.011920529801324504, 0.6174801362088536, 0.011920529801324504, 0.6288308740068105, 0.013245033112582781, 0.6469920544835415, 0.01456953642384106, 0.6708286038592508, 0.01456953642384106, 0.6799091940976163, 0.015894039735099338, 0.7264472190692395, 0.015894039735099338, 0.7321225879682179, 0.017218543046357615, 0.7423382519863791, 0.017218543046357615, 0.7468785471055619, 0.018543046357615896, 0.7514188422247446, 0.018543046357615896, 0.7582292849035187, 0.017218543046357615, 0.8036322360953462, 0.017218543046357615, 0.8104426787741204, 0.015894039735099338, 0.8161180476730987, 0.015894039735099338, 0.8240635641316686, 0.013245033112582781, 0.8433598183881952, 0.011920529801324504, 0.8479001135073779, 0.011920529801324504, 0.8547105561861521, 0.010596026490066225, 0.8637911464245176, 0.011920529801324504, 0.8796821793416572, 0.011920529801324504, 0.8842224744608399, 0.010596026490066225, 0.8864926220204313, 0.010596026490066225, 0.8910329171396141, 0.009271523178807948, 0.8967082860385925, 0.009271523178807948, 0.9035187287173666, 0.006622516556291391, 0.9262202043132803, 0.006622516556291391, 0.9318955732122588, 0.007947019867549669, 0.9341657207718501, 0.007947019867549669, 0.9375709421112373, 0.006622516556291391, 0.9727582292849035, 0.006622516556291391, 0.978433598183882, 0.005298013245033113, 0.9909194097616345, 0.003973509933774834, 0.9931895573212258, 0.003973509933774834, 0.996594778660613, 0.0026490066225165563, 0.9977298524404086, 0.0026490066225165563, 0.9977298524404086, 0.0013245033112582781, 0.9988649262202043, 0.0013245033112582781, 0.9988649262202043, 0, 0.9977298524404086, 0, 0.9886492622020431, 0.005298013245033113, 0.9875141884222475, 0.006622516556291391, 0.9863791146424518, 0.006622516556291391, 0.9841089670828603, 0.007947019867549669, 0.9829738933030647, 0.009271523178807948, 0.9807037457434733, 0.010596026490066225, 0.9761634506242906, 0.015894039735099338, 0.9727582292849035, 0.017218543046357615, 0.9704880817253121, 0.018543046357615896, 0.9670828603859251, 0.022516556291390728, 0.9568671963677639, 0.030463576158940398, 0.9534619750283768, 0.03443708609271523, 0.9489216799091941, 0.038410596026490065, 0.94211123723042, 0.045033112582781455, 0.9387060158910329, 0.04900662251655629, 0.9353007945516458, 0.054304635761589407, 0.923950056753689, 0.06754966887417219, 0.9194097616345063, 0.07152317880794702, 0.9137343927355278, 0.07417218543046358, 0.9103291713961408, 0.0781456953642384, 0.9069239500567536, 0.08079470198675497, 0.9023836549375709, 0.0847682119205298, 0.8978433598183881, 0.09006622516556291, 0.8864926220204313, 0.10066225165562914, 0.8774120317820658, 0.10993377483443709, 0.8762769580022701, 0.11258278145695365, 0.8660612939841089, 0.12450331125827814, 0.8615209988649262, 0.12847682119205298, 0.8558456299659478, 0.13509933774834437, 0.8513053348467651, 0.14172185430463577, 0.8479001135073779, 0.14701986754966886, 0.8433598183881952, 0.1509933774834437, 0.8354143019296254, 0.15894039735099338, 0.8286038592508513, 0.16556291390728478, 0.8217934165720772, 0.17086092715231788, 0.8104426787741204, 0.1827814569536424, 0.8059023836549376, 0.18675496688741722, 0.7990919409761634, 0.19337748344370861, 0.7922814982973894, 0.1986754966887417, 0.7900113507377979, 0.20132450331125828, 0.7820658342792282, 0.20927152317880796, 0.7695800227014756, 0.22251655629139072, 0.7639046538024972, 0.2304635761589404, 0.757094211123723, 0.23841059602649006, 0.7502837684449489, 0.247682119205298, 0.7400681044267877, 0.26225165562913905, 0.7264472190692395, 0.280794701986755, 0.720771850170261, 0.28874172185430463, 0.7162315550510783, 0.295364238410596, 0.7128263337116912, 0.30066225165562915, 0.7094211123723042, 0.3033112582781457, 0.7003405221339387, 0.3152317880794702, 0.6912599318955732, 0.3258278145695364, 0.684449489216799, 0.3350993377483444, 0.6787741203178207, 0.343046357615894, 0.6730987514188422, 0.3483443708609272, 0.662883087400681, 0.3615894039735099, 0.6606129398410897, 0.3655629139072848, 0.6572077185017026, 0.3708609271523179, 0.6526674233825198, 0.37748344370860926, 0.6390465380249716, 0.3933774834437086, 0.6242905788876277, 0.40927152317880794, 0.6174801362088536, 0.41589403973509936, 0.6083995459704881, 0.4291390728476821, 0.6004540295119183, 0.4370860927152318, 0.5822928490351873, 0.45165562913907287, 0.5732122587968218, 0.4596026490066225, 0.5391600454029511, 0.4913907284768212, 0.5187287173666288, 0.5152317880794702, 0.49943246311010214, 0.5364238410596026, 0.48354143019296253, 0.5509933774834437, 0.47446083995459704, 0.5589403973509933, 0.4642451759364359, 0.5708609271523178, 0.452894438138479, 0.5814569536423841, 0.4460839954597049, 0.5867549668874172, 0.4267877412031782, 0.6079470198675496, 0.4097616345062429, 0.6251655629139072, 0.3859250851305335, 0.6410596026490066, 0.3745743473325766, 0.6490066225165563, 0.3654937570942111, 0.6582781456953642, 0.3518728717366629, 0.6754966887417219, 0.3314415437003405, 0.6966887417218544, 0.3132803632236095, 0.713907284768212, 0.2985244040862656, 0.7271523178807947, 0.27695800227014755, 0.7456953642384105, 0.26106696935300794, 0.7589403973509934, 0.2395005675368899, 0.776158940397351, 0.2054483541430193, 0.8026490066225166, 0.17593643586833144, 0.8264900662251655, 0.14642451759364358, 0.847682119205298, 0.12485811577752554, 0.8649006622516556, 0.12031782065834279, 0.8688741721854305, 0.11237230419977298, 0.8754966887417218, 0.09875141884222474, 0.8874172185430463, 0.08626560726447219, 0.8993377483443709, 0.07377979568671963, 0.909933774834437, 0.0681044267877412, 0.9139072847682119, 0.06356413166855845, 0.9205298013245033, 0.05221339387060159, 0.9324503311258279, 0.03859250851305335, 0.9483443708609272, 0.02724177071509648, 0.9602649006622517, 0.0056753688989784334, 0.9854304635761589, 0.0022701475595913734, 0.9880794701986755, 0.0022701475595913734, 0.9894039735099338, 0.0011350737797956867, 0.9894039735099338, 0, 0.990728476821192, 0.00340522133938706, 0.990728476821192, 0.007945516458569807, 0.9894039735099338, 0.04086265607264472, 0.9894039735099338, 0.046538024971623154, 0.9880794701986755, 0.07264472190692395, 0.9880794701986755, 0.0771850170261067, 0.9867549668874173, 0.10669693530079455, 0.9867549668874173, 0.11010215664018161, 0.9854304635761589, 0.12258796821793416, 0.9854304635761589, 0.1362088535754824, 0.9841059602649007, 0.1532349602724177, 0.9827814569536424, 0.1713961407491487, 0.9827814569536424, 0.188422247446084, 0.9801324503311258, 0.2122587968217934, 0.9801324503311258, 0.23382519863791146, 0.9788079470198675, 0.3314415437003405, 0.9788079470198675, 0.35754824063564133, 0.9801324503311258, 0.3711691259931896, 0.9814569536423841, 0.3836549375709421, 0.9814569536423841, 0.3995459704880817, 0.9841059602649007, 0.4211123723041998, 0.9854304635761589, 0.4335981838819523, 0.9867549668874173, 0.4449489216799092, 0.9880794701986755, 0.4585698070374574, 0.9894039735099338, 0.4960272417707151, 0.9894039735099338, 0.5051078320090806, 0.9880794701986755, 0.5119182746878547, 0.9880794701986755, 0.5232690124858116, 0.9867549668874173, 0.52894438138479, 0.9867549668874173, 0.5334846765039728, 0.9854304635761589, 0.5459704880817253, 0.9841059602649007, 0.5595913734392736, 0.9827814569536424, 0.5698070374574348, 0.9827814569536424, 0.5822928490351873, 0.9841059602649007, 0.6004540295119183, 0.9854304635761589, 0.6208853575482406, 0.9880794701986755, 0.6356413166855845, 0.9894039735099338, 0.6492622020431328, 0.9894039735099338, 0.6685584562996595, 0.990728476821192, 0.6855845629965948, 0.990728476821192, 0.699205448354143, 0.9894039735099338, 0.7105561861520999, 0.9894039735099338, 0.7219069239500567, 0.9880794701986755, 0.7956867196367764, 0.9880794701986755, 0.8127128263337117, 0.9894039735099338, 0.8263337116912599, 0.990728476821192, 0.8524404086265607, 0.990728476821192, 0.8649262202043133, 0.9920529801324504, 0.8706015891032917, 0.9933774834437086, 0.8785471055618616, 0.9947019867549669, 0.8955732122587968, 0.9960264900662251, 0.9103291713961408, 0.9973509933774835, 0.9216799091940976, 1, 0.9318955732122588, 1, 0.945516458569807, 0.9986754966887417, 0.9523269012485811, 0.9973509933774835, 0.9568671963677639, 0.9973509933774835, 0.9670828603859251, 0.9960264900662251, 0.9727582292849035, 0.9947019867549669, 0.9954597048808173, 0.9947019867549669, 0.996594778660613, 0.9933774834437086, 0.9977298524404086, 0.9933774834437086, 0.9988649262202043, 0.9920529801324504, 1, 0.9920529801324504])]);
    this.knownGestureIds.push('Z');
    this.knownGestures.push([Path.fromCoordinatesArray([0, 1, 0, 0.9973404255319149, 0.0037735849056603774, 0.9867021276595744, 0.007547169811320755, 0.9441489361702128, 0.011320754716981131, 0.925531914893617, 0.01509433962264151, 0.901595744680851, 0.01509433962264151, 0.8457446808510638, 0.011320754716981131, 0.800531914893617, 0.011320754716981131, 0.7819148936170213, 0.007547169811320755, 0.7579787234042553, 0.0037735849056603774, 0.7393617021276596, 0.0037735849056603774, 0.6303191489361702, 0.007547169811320755, 0.6117021276595744, 0.007547169811320755, 0.5638297872340425, 0.011320754716981131, 0.5585106382978723, 0.011320754716981131, 0.5186170212765957, 0.01509433962264151, 0.5106382978723404, 0.01509433962264151, 0.4308510638297872, 0.018867924528301886, 0.4148936170212766, 0.018867924528301886, 0.3962765957446808, 0.01509433962264151, 0.375, 0.01509433962264151, 0.3058510638297872, 0.011320754716981131, 0.2845744680851064, 0.011320754716981131, 0.14893617021276595, 0.01509433962264151, 0.13829787234042554, 0.01509433962264151, 0.05319148936170213, 0.018867924528301886, 0.04521276595744681, 0.018867924528301886, 0.02925531914893617, 0.01509433962264151, 0.026595744680851064, 0.01509433962264151, 0.007978723404255319, 0.045283018867924525, 0.007978723404255319, 0.052830188679245285, 0.005319148936170213, 0.07547169811320754, 0.005319148936170213, 0.09433962264150944, 0.0026595744680851063, 0.11320754716981132, 0.0026595744680851063, 0.1320754716981132, 0, 0.37735849056603776, 0, 0.39622641509433965, 0.0026595744680851063, 0.44150943396226416, 0.005319148936170213, 0.4641509433962264, 0.007978723404255319, 0.49056603773584906, 0.013297872340425532, 0.5283018867924528, 0.018617021276595744, 0.5509433962264151, 0.023936170212765957, 0.5735849056603773, 0.026595744680851064, 0.5924528301886792, 0.031914893617021274, 0.6075471698113207, 0.034574468085106384, 0.6188679245283019, 0.03723404255319149, 0.6377358490566037, 0.0398936170212766, 0.6566037735849056, 0.04521276595744681, 0.6641509433962264, 0.04521276595744681, 0.6754716981132075, 0.05053191489361702, 0.7056603773584905, 0.061170212765957445, 0.7132075471698113, 0.06648936170212766, 0.7245283018867924, 0.06914893617021277, 0.7471698113207547, 0.07712765957446809, 0.7660377358490567, 0.08244680851063829, 0.7773584905660378, 0.08776595744680851, 0.7886792452830189, 0.09042553191489362, 0.7962264150943397, 0.09308510638297872, 0.8, 0.09308510638297872, 0.8113207547169812, 0.10106382978723404, 0.8150943396226416, 0.10638297872340426, 0.8226415094339623, 0.10638297872340426, 0.8301886792452831, 0.11170212765957446, 0.8603773584905661, 0.1276595744680851, 0.879245283018868, 0.14095744680851063, 0.8981132075471698, 0.15159574468085107, 0.9132075471698113, 0.16489361702127658, 0.9320754716981132, 0.17819148936170212, 0.9433962264150944, 0.18882978723404256, 0.9584905660377359, 0.2047872340425532, 0.9584905660377359, 0.21010638297872342, 0.9622641509433962, 0.2127659574468085, 0.9660377358490566, 0.21808510638297873, 0.969811320754717, 0.22606382978723405, 0.9849056603773585, 0.24202127659574468, 0.9886792452830189, 0.25, 0.9962264150943396, 0.2579787234042553, 0.9962264150943396, 0.2632978723404255, 1, 0.2712765957446808, 1, 0.324468085106383, 0.9962264150943396, 0.3351063829787234, 0.9962264150943396, 0.34308510638297873, 0.9924528301886792, 0.34574468085106386, 0.9622641509433962, 0.3882978723404255, 0.9433962264150944, 0.40691489361702127, 0.9320754716981132, 0.4148936170212766, 0.9283018867924528, 0.4228723404255319, 0.9207547169811321, 0.43351063829787234, 0.909433962264151, 0.4441489361702128, 0.8981132075471698, 0.4521276595744681, 0.8905660377358491, 0.4627659574468085, 0.8301886792452831, 0.5053191489361702, 0.8150943396226416, 0.5106382978723404, 0.8075471698113208, 0.5159574468085106, 0.8, 0.5186170212765957, 0.7811320754716982, 0.523936170212766, 0.7660377358490567, 0.526595744680851, 0.7433962264150943, 0.5319148936170213, 0.7169811320754716, 0.5345744680851063, 0.6830188679245283, 0.5372340425531915, 0.6490566037735849, 0.5452127659574468, 0.6150943396226415, 0.5478723404255319, 0.5735849056603773, 0.5531914893617021, 0.5056603773584906, 0.5585106382978723, 0.4867924528301887, 0.5611702127659575, 0.3584905660377358, 0.5611702127659575, 0.32075471698113206, 0.5585106382978723, 0.28679245283018867, 0.5558510638297872, 0.26037735849056604, 0.5531914893617021, 0.19245283018867926, 0.5531914893617021, 0.17735849056603772, 0.550531914893617, 0.1509433962264151, 0.550531914893617, 0.13962264150943396, 0.5478723404255319, 0.07924528301886792, 0.5478723404255319, 0.07924528301886792, 0.550531914893617, 0.06792452830188679, 0.550531914893617, 0.06415094339622641, 0.5531914893617021, 0.052830188679245285, 0.5531914893617021, 0.04905660377358491, 0.5558510638297872, 0.026415094339622643, 0.5558510638297872, 0.026415094339622643, 0.5585106382978723, 0.022641509433962263, 0.5585106382978723])]);
    this.knownGestureIds.push('P');
    this.knownGestures.push([Path.fromCoordinatesArray([0.0738255033557047, 0.9345238095238095, 0.0738255033557047, 0.9325396825396826, 0.06711409395973154, 0.9206349206349206, 0.06711409395973154, 0.8988095238095238, 0.06040268456375839, 0.8630952380952381, 0.053691275167785234, 0.8412698412698413, 0.0436241610738255, 0.8174603174603174, 0.030201342281879196, 0.7936507936507936, 0.030201342281879196, 0.746031746031746, 0.02348993288590604, 0.6924603174603174, 0.02348993288590604, 0.5833333333333334, 0.020134228187919462, 0.5277777777777778, 0.013422818791946308, 0.4880952380952381, 0.013422818791946308, 0.4603174603174603, 0.020134228187919462, 0.43452380952380953, 0.030201342281879196, 0.3888888888888889, 0.03691275167785235, 0.3333333333333333, 0.03691275167785235, 0.30158730158730157, 0.03355704697986577, 0.2777777777777778, 0.030201342281879196, 0.26785714285714285, 0.026845637583892617, 0.2619047619047619, 0.026845637583892617, 0.25595238095238093, 0.02348993288590604, 0.24801587301587302, 0.02348993288590604, 0.2361111111111111, 0.016778523489932886, 0.2222222222222222, 0.013422818791946308, 0.20833333333333334, 0.013422818791946308, 0.19246031746031747, 0.006711409395973154, 0.1765873015873016, 0.006711409395973154, 0.07142857142857142, 0.003355704697986577, 0.05555555555555555, 0, 0.041666666666666664, 0, 0.001984126984126984, 0.010067114093959731, 0, 0.09060402684563758, 0, 0.12751677852348994, 0.001984126984126984, 0.15771812080536912, 0.003968253968253968, 0.19798657718120805, 0.003968253968253968, 0.2348993288590604, 0.005952380952380952, 0.30201342281879195, 0.013888888888888888, 0.34563758389261745, 0.01984126984126984, 0.38926174496644295, 0.027777777777777776, 0.4261744966442953, 0.03571428571428571, 0.4597315436241611, 0.041666666666666664, 0.5, 0.047619047619047616, 0.540268456375839, 0.05555555555555555, 0.5637583892617449, 0.05952380952380952, 0.587248322147651, 0.06547619047619048, 0.6208053691275168, 0.07341269841269842, 0.6510067114093959, 0.08134920634920635, 0.674496644295302, 0.09126984126984126, 0.6946308724832215, 0.0992063492063492, 0.7181208053691275, 0.10714285714285714, 0.7416107382550335, 0.1130952380952381, 0.761744966442953, 0.11904761904761904, 0.7785234899328859, 0.12301587301587301, 0.7986577181208053, 0.13095238095238096, 0.8154362416107382, 0.1388888888888889, 0.8355704697986577, 0.14682539682539683, 0.8456375838926175, 0.15674603174603174, 0.8590604026845637, 0.1626984126984127, 0.8758389261744967, 0.17063492063492064, 0.9060402684563759, 0.19444444444444445, 0.9161073825503355, 0.20436507936507936, 0.9228187919463087, 0.21428571428571427, 0.9295302013422819, 0.2222222222222222, 0.9362416107382551, 0.23214285714285715, 0.9395973154362416, 0.24404761904761904, 0.9429530201342282, 0.25396825396825395, 0.9429530201342282, 0.27976190476190477, 0.9463087248322147, 0.2896825396825397, 0.9463087248322147, 0.31547619047619047, 0.9429530201342282, 0.3253968253968254, 0.9395973154362416, 0.3333333333333333, 0.9328859060402684, 0.3412698412698413, 0.9261744966442953, 0.35119047619047616, 0.9161073825503355, 0.35714285714285715, 0.9093959731543624, 0.3630952380952381, 0.889261744966443, 0.37896825396825395, 0.87248322147651, 0.3869047619047619, 0.8624161073825504, 0.3948412698412698, 0.8523489932885906, 0.4007936507936508, 0.802013422818792, 0.4246031746031746, 0.7785234899328859, 0.43253968253968256, 0.7181208053691275, 0.44841269841269843, 0.6879194630872483, 0.45436507936507936, 0.6610738255033557, 0.4603174603174603, 0.6375838926174496, 0.4642857142857143, 0.610738255033557, 0.46825396825396826, 0.587248322147651, 0.47023809523809523, 0.5671140939597316, 0.4722222222222222, 0.5469798657718121, 0.47619047619047616, 0.5234899328859061, 0.4801587301587302, 0.5067114093959731, 0.48214285714285715, 0.4664429530201342, 0.49007936507936506, 0.4395973154362416, 0.49404761904761907, 0.4161073825503356, 0.49603174603174605, 0.40268456375838924, 0.498015873015873, 0.37919463087248323, 0.501984126984127, 0.3087248322147651, 0.5079365079365079, 0.28859060402684567, 0.5099206349206349, 0.27181208053691275, 0.5119047619047619, 0.2516778523489933, 0.5119047619047619, 0.23154362416107382, 0.5138888888888888, 0.15771812080536912, 0.5138888888888888, 0.14093959731543623, 0.5119047619047619, 0.12751677852348994, 0.5099206349206349, 0.11409395973154363, 0.5099206349206349, 0.1040268456375839, 0.5079365079365079, 0.09060402684563758, 0.5079365079365079, 0.087248322147651, 0.5059523809523809, 0.08053691275167785, 0.5059523809523809, 0.0738255033557047, 0.503968253968254, 0.06375838926174497, 0.503968253968254, 0.11409395973154363, 0.503968253968254, 0.13758389261744966, 0.5059523809523809, 0.16778523489932887, 0.5099206349206349, 0.20134228187919462, 0.5119047619047619, 0.28187919463087246, 0.5198412698412699, 0.3288590604026846, 0.5257936507936508, 0.3724832214765101, 0.5317460317460317, 0.412751677852349, 0.5376984126984127, 0.4597315436241611, 0.5436507936507936, 0.5033557046979866, 0.5496031746031746, 0.5369127516778524, 0.5555555555555556, 0.5805369127516778, 0.5615079365079365, 0.6140939597315436, 0.5714285714285714, 0.6879194630872483, 0.5912698412698413, 0.7416107382550335, 0.6051587301587301, 0.7651006711409396, 0.6130952380952381, 0.785234899328859, 0.6190476190476191, 0.8087248322147651, 0.626984126984127, 0.8221476510067114, 0.6329365079365079, 0.8355704697986577, 0.6369047619047619, 0.8523489932885906, 0.6428571428571429, 0.8657718120805369, 0.6488095238095238, 0.8791946308724832, 0.6527777777777778, 0.8926174496644296, 0.6607142857142857, 0.9060402684563759, 0.6646825396825397, 0.9161073825503355, 0.6686507936507936, 0.9228187919463087, 0.6726190476190477, 0.9328859060402684, 0.6765873015873016, 0.9395973154362416, 0.6805555555555556, 0.9530201342281879, 0.6924603174603174, 0.9664429530201343, 0.7083333333333334, 0.9798657718120806, 0.7202380952380952, 0.9899328859060402, 0.7341269841269841, 0.9966442953020134, 0.7599206349206349, 1, 0.7777777777777778, 0.9966442953020134, 0.7936507936507936, 0.9899328859060402, 0.8115079365079365, 0.9765100671140939, 0.8313492063492064, 0.959731543624161, 0.8472222222222222, 0.9395973154362416, 0.8650793650793651, 0.9261744966442953, 0.875, 0.9060402684563759, 0.8888888888888888, 0.8758389261744967, 0.9047619047619048, 0.8355704697986577, 0.9186507936507936, 0.7953020134228188, 0.9305555555555556, 0.7516778523489933, 0.9444444444444444, 0.7114093959731543, 0.9563492063492064, 0.6946308724832215, 0.9623015873015873, 0.6476510067114094, 0.9702380952380952, 0.6073825503355704, 0.9761904761904762, 0.5637583892617449, 0.9861111111111112, 0.5234899328859061, 0.9900793650793651, 0.4798657718120805, 0.9940476190476191, 0.4395973154362416, 0.998015873015873, 0.39932885906040266, 0.998015873015873, 0.3825503355704698, 1, 0.3523489932885906, 1, 0.32550335570469796, 0.998015873015873, 0.23154362416107382, 0.998015873015873, 0.22483221476510068, 1, 0.20469798657718122, 1, 0.18791946308724833, 0.998015873015873, 0.1644295302013423, 0.996031746031746, 0.12751677852348994, 0.996031746031746, 0.12416107382550336, 0.9940476190476191, 0.10067114093959731, 0.9940476190476191, 0.09731543624161074, 0.996031746031746, 0.0738255033557047, 0.996031746031746, 0.0738255033557047, 0.998015873015873, 0.06711409395973154, 0.998015873015873])]);
    this.knownGestureIds.push('B');
    this.knownGestures.push([Path.fromCoordinatesArray([0.0033003300330033004, 1, 0.0033003300330033004, 0.994750656167979, 0.009900990099009901, 0.989501312335958, 0.019801980198019802, 0.979002624671916, 0.0297029702970297, 0.963254593175853, 0.0462046204620462, 0.9396325459317585, 0.056105610561056105, 0.926509186351706, 0.066006600660066, 0.9081364829396326, 0.07920792079207921, 0.89501312335958, 0.0891089108910891, 0.8792650918635171, 0.12871287128712872, 0.8320209973753281, 0.1419141914191419, 0.8188976377952756, 0.14521452145214522, 0.8110236220472441, 0.15841584158415842, 0.7952755905511811, 0.17491749174917492, 0.7795275590551181, 0.18811881188118812, 0.7664041994750657, 0.20462046204620463, 0.7480314960629921, 0.21782178217821782, 0.7322834645669292, 0.23102310231023102, 0.7112860892388452, 0.24422442244224424, 0.7007874015748031, 0.25742574257425743, 0.6850393700787402, 0.2838283828382838, 0.6587926509186351, 0.30033003300330036, 0.6456692913385826, 0.3102310231023102, 0.6299212598425197, 0.3234323432343234, 0.6194225721784777, 0.33003300330033003, 0.6089238845144357, 0.35313531353135313, 0.5905511811023622, 0.3696369636963696, 0.5748031496062992, 0.38943894389438943, 0.5590551181102362, 0.39933993399339934, 0.5459317585301837, 0.41914191419141916, 0.5275590551181102, 0.4389438943894389, 0.5039370078740157, 0.45874587458745875, 0.48293963254593175, 0.48184818481848185, 0.46194225721784776, 0.5016501650165016, 0.4356955380577428, 0.5247524752475248, 0.41732283464566927, 0.5412541254125413, 0.3963254593175853, 0.5577557755775577, 0.3805774278215223, 0.5841584158415841, 0.3543307086614173, 0.6039603960396039, 0.3359580052493438, 0.6138613861386139, 0.32808398950131235, 0.6303630363036303, 0.31758530183727035, 0.6435643564356436, 0.30708661417322836, 0.6534653465346535, 0.29658792650918636, 0.6666666666666666, 0.2887139107611549, 0.6732673267326733, 0.2782152230971129, 0.6765676567656765, 0.2755905511811024, 0.6897689768976898, 0.2677165354330709, 0.7161716171617162, 0.24671916010498687, 0.735973597359736, 0.23622047244094488, 0.7425742574257426, 0.2283464566929134, 0.759075907590759, 0.2204724409448819, 0.768976897689769, 0.2125984251968504, 0.7722772277227723, 0.2073490813648294, 0.7788778877887789, 0.1994750656167979, 0.7920792079207921, 0.1889763779527559, 0.8052805280528053, 0.1732283464566929, 0.8151815181518152, 0.1679790026246719, 0.8184818481848185, 0.16535433070866143, 0.8283828382838284, 0.16010498687664043, 0.834983498349835, 0.15485564304461943, 0.8415841584158416, 0.14698162729658792, 0.8514851485148515, 0.13910761154855644, 0.8646864686468647, 0.12335958005249344, 0.8811881188118812, 0.10761154855643044, 0.9174917491749175, 0.07874015748031496, 0.9207920792079208, 0.07086614173228346, 0.9273927392739274, 0.06561679790026247, 0.933993399339934, 0.05511811023622047, 0.9405940594059405, 0.047244094488188976, 0.9471947194719472, 0.04461942257217848, 0.9504950495049505, 0.04199475065616798, 0.9570957095709571, 0.031496062992125984, 0.9636963696369637, 0.028871391076115485, 0.966996699669967, 0.023622047244094488, 0.976897689768977, 0.015748031496062992, 0.9801980198019802, 0.010498687664041995, 0.9900990099009901, 0.0026246719160104987, 0.9900990099009901, 0, 0.9834983498349835, 0.0026246719160104987, 0.9636963696369637, 0.005249343832020997, 0.9504950495049505, 0.005249343832020997, 0.933993399339934, 0.007874015748031496, 0.9207920792079208, 0.010498687664041995, 0.9108910891089109, 0.013123359580052493, 0.8976897689768977, 0.013123359580052493, 0.8679867986798679, 0.02099737532808399, 0.8547854785478548, 0.02099737532808399, 0.8448844884488449, 0.023622047244094488, 0.8283828382838284, 0.023622047244094488, 0.8118811881188119, 0.028871391076115485, 0.7887788778877888, 0.028871391076115485, 0.7722772277227723, 0.031496062992125984, 0.7425742574257426, 0.031496062992125984, 0.7194719471947195, 0.03412073490813648, 0.6897689768976898, 0.03412073490813648, 0.6666666666666666, 0.03674540682414698, 0.5445544554455446, 0.03674540682414698, 0.528052805280528, 0.03412073490813648, 0.504950495049505, 0.03412073490813648, 0.4884488448844885, 0.031496062992125984, 0.4752475247524752, 0.031496062992125984, 0.42244224422442245, 0.026246719160104987, 0.4158415841584158, 0.023622047244094488, 0.40924092409240925, 0.023622047244094488, 0.39603960396039606, 0.02099737532808399, 0.3696369636963696, 0.01837270341207349, 0.34983498349834985, 0.015748031496062992, 0.33003300330033003, 0.010498687664041995, 0.2838283828382838, 0.010498687664041995, 0.264026402640264, 0.007874015748031496, 0.22772277227722773, 0.005249343832020997, 0.1716171617161716, 0.005249343832020997, 0.15841584158415842, 0.0026246719160104987, 0.1254125412541254, 0.0026246719160104987, 0.1188118811881188, 0.005249343832020997, 0.07590759075907591, 0.005249343832020997, 0.066006600660066, 0.007874015748031496, 0, 0.007874015748031496, 0, 0.010498687664041995, 0.0033003300330033004, 0.013123359580052493, 0.009900990099009901, 0.015748031496062992, 0.013201320132013201, 0.02099737532808399, 0.0231023102310231, 0.028871391076115485, 0.033003300330033, 0.03412073490813648, 0.056105610561056105, 0.05511811023622047, 0.066006600660066, 0.06299212598425197, 0.08250825082508251, 0.07349081364829396, 0.09570957095709572, 0.08398950131233596, 0.10561056105610561, 0.09448818897637795, 0.11551155115511551, 0.10236220472440945, 0.12211221122112212, 0.11286089238845144, 0.132013201320132, 0.12335958005249344, 0.14521452145214522, 0.13648293963254593, 0.1551155115511551, 0.14960629921259844, 0.16831683168316833, 0.17060367454068243, 0.2145214521452145, 0.2073490813648294, 0.22112211221122113, 0.2178477690288714, 0.23102310231023102, 0.22572178477690288, 0.24422442244224424, 0.2388451443569554, 0.25742574257425743, 0.24671916010498687, 0.26732673267326734, 0.2572178477690289, 0.27722772277227725, 0.27034120734908135, 0.2871287128712871, 0.28083989501312334, 0.297029702970297, 0.29396325459317585, 0.3069306930693069, 0.30446194225721784, 0.31683168316831684, 0.31758530183727035, 0.3333333333333333, 0.33070866141732286, 0.3465346534653465, 0.3438320209973753, 0.36303630363036304, 0.3569553805774278, 0.38613861386138615, 0.37270341207349084, 0.40594059405940597, 0.3884514435695538, 0.42574257425742573, 0.4015748031496063, 0.44884488448844884, 0.4146981627296588, 0.46534653465346537, 0.4330708661417323, 0.48514851485148514, 0.4435695538057743, 0.504950495049505, 0.45931758530183725, 0.5214521452145214, 0.46981627296587924, 0.5379537953795379, 0.48293963254593175, 0.5544554455445545, 0.49868766404199477, 0.5676567656765676, 0.5118110236220472, 0.5841584158415841, 0.5249343832020997, 0.5973597359735974, 0.5433070866141733, 0.6171617161716172, 0.5564304461942258, 0.6336633663366337, 0.5695538057742782, 0.6468646864686468, 0.5774278215223098, 0.6600660066006601, 0.5879265091863517, 0.6666666666666666, 0.5958005249343832, 0.6798679867986799, 0.6036745406824147, 0.6864686468646864, 0.6115485564304461, 0.6963696369636964, 0.6194225721784777, 0.7095709570957096, 0.6325459317585301, 0.7194719471947195, 0.6430446194225722, 0.7326732673267327, 0.6561679790026247, 0.7392739273927392, 0.6640419947506562, 0.7491749174917491, 0.6771653543307087, 0.7557755775577558, 0.6850393700787402, 0.7656765676567657, 0.6955380577427821, 0.7755775577557755, 0.7034120734908137, 0.7920792079207921, 0.7139107611548556, 0.8052805280528053, 0.7270341207349081, 0.8184818481848185, 0.7375328083989501, 0.8316831683168316, 0.7454068241469817, 0.8514851485148515, 0.7664041994750657, 0.8613861386138614, 0.7742782152230971, 0.8679867986798679, 0.7821522309711286, 0.8745874587458746, 0.7874015748031497, 0.8811881188118812, 0.7979002624671916, 0.8910891089108911, 0.8057742782152231, 0.8910891089108911, 0.8083989501312336, 0.8943894389438944, 0.8083989501312336, 0.8943894389438944, 0.8110236220472441, 0.900990099009901, 0.8162729658792651, 0.9042904290429042, 0.821522309711286, 0.9075907590759076, 0.8241469816272966, 0.9141914191419142, 0.8346456692913385, 0.9174917491749175, 0.8372703412073491, 0.9240924092409241, 0.847769028871391, 0.9372937293729373, 0.8582677165354331, 0.9372937293729373, 0.8608923884514436, 0.9438943894389439, 0.8661417322834646, 0.9438943894389439, 0.868766404199475, 0.9504950495049505, 0.8713910761154856, 0.9504950495049505, 0.8766404199475065, 0.9570957095709571, 0.8792650918635171, 0.9603960396039604, 0.884514435695538, 0.9603960396039604, 0.889763779527559, 0.9636963696369637, 0.8923884514435696, 0.9636963696369637, 0.89501312335958, 0.966996699669967, 0.8976377952755905, 0.966996699669967, 0.9002624671916011, 0.9702970297029703, 0.9028871391076115, 0.9702970297029703, 0.9081364829396326, 0.976897689768977, 0.9133858267716536, 0.976897689768977, 0.9186351706036745, 0.9801980198019802, 0.9212598425196851, 0.9867986798679867, 0.931758530183727, 0.9867986798679867, 0.9343832020997376, 0.9933993399339934, 0.9448818897637795, 0.9966996699669967, 0.94750656167979, 0.9966996699669967, 0.952755905511811, 1, 0.9553805774278216, 1, 0.9606299212598425])]);
    this.knownGestureIds.push('X');
    this.knownGestures.push([Path.fromCoordinatesArray([0.9624413145539906, 0.012944983818770227, 0.7183098591549296, 0, 0.6619718309859155, 0.006472491909385114, 0.6103286384976526, 0.006472491909385114, 0.5915492957746479, 0.009708737864077669, 0.5539906103286385, 0.012944983818770227, 0.5023474178403756, 0.019417475728155338, 0.4647887323943662, 0.022653721682847898, 0.37089201877934275, 0.03559870550161812, 0.3286384976525822, 0.045307443365695796, 0.2676056338028169, 0.05825242718446602, 0.23943661971830985, 0.07119741100323625, 0.20187793427230047, 0.08414239482200647, 0.16901408450704225, 0.10355987055016182, 0.1267605633802817, 0.11974110032362459, 0.07042253521126761, 0.15210355987055016, 0.056338028169014086, 0.16181229773462782, 0.009389671361502348, 0.20711974110032363, 0, 0.2297734627831715, 0, 0.26537216828478966, 0.004694835680751174, 0.28802588996763756, 0.009389671361502348, 0.31715210355987056, 0.018779342723004695, 0.3333333333333333, 0.06572769953051644, 0.3656957928802589, 0.10328638497652583, 0.3786407766990291, 0.15023474178403756, 0.39158576051779936, 0.19248826291079812, 0.40129449838187703, 0.23943661971830985, 0.4110032362459547, 0.29577464788732394, 0.42071197411003236, 0.3615023474178404, 0.4336569579288026, 0.39436619718309857, 0.4368932038834951, 0.4694835680751174, 0.44336569579288027, 0.5352112676056338, 0.45307443365695793, 0.596244131455399, 0.4627831715210356, 0.6384976525821596, 0.47249190938511326, 0.6901408450704225, 0.47896440129449835, 0.7511737089201878, 0.4886731391585761, 0.7793427230046949, 0.49514563106796117, 0.8356807511737089, 0.5016181229773463, 0.8873239436619719, 0.5145631067961165, 0.9624413145539906, 0.5372168284789643, 0.9671361502347418, 0.5372168284789643, 0.9671361502347418, 0.540453074433657, 0.971830985915493, 0.5436893203883495, 0.971830985915493, 0.5469255663430421, 0.9765258215962441, 0.5533980582524272, 0.9765258215962441, 0.5598705501618123, 0.9812206572769953, 0.56957928802589, 0.9953051643192489, 0.6375404530744336, 0.9953051643192489, 0.6828478964401294, 1, 0.6957928802588996, 1, 0.7378640776699029, 0.9953051643192489, 0.7540453074433657, 0.9906103286384976, 0.7637540453074434, 0.9812206572769953, 0.7734627831715211, 0.971830985915493, 0.7864077669902912, 0.9577464788732394, 0.7961165048543689, 0.9389671361502347, 0.8122977346278317, 0.9061032863849765, 0.8349514563106796, 0.8779342723004695, 0.8511326860841424, 0.8356807511737089, 0.8673139158576052, 0.8028169014084507, 0.8802588996763754, 0.7323943661971831, 0.8996763754045307, 0.7136150234741784, 0.9029126213592233, 0.6948356807511737, 0.9093851132686084, 0.6807511737089202, 0.912621359223301, 0.6431924882629108, 0.9255663430420712, 0.6009389671361502, 0.9320388349514563, 0.5539906103286385, 0.9385113268608414, 0.5164319248826291, 0.948220064724919, 0.4647887323943662, 0.9546925566343042, 0.4272300469483568, 0.9611650485436893, 0.38967136150234744, 0.9644012944983819, 0.3615023474178404, 0.970873786407767, 0.3004694835680751, 0.970873786407767, 0.27699530516431925, 0.9741100323624595, 0.18309859154929578, 0.9741100323624595, 0.1784037558685446, 0.9773462783171522, 0.16901408450704225, 0.9773462783171522, 0.1643192488262911, 0.9805825242718447, 0.15492957746478872, 0.9805825242718447, 0.15023474178403756, 0.9838187702265372, 0.14553990610328638, 0.9838187702265372, 0.14084507042253522, 0.9870550161812298, 0.13615023474178403, 0.9870550161812298, 0.13145539906103287, 0.9902912621359223, 0.11737089201877934, 0.9935275080906149, 0.11267605633802817, 0.9935275080906149, 0.107981220657277, 0.9967637540453075, 0.10328638497652583, 0.9967637540453075, 0.09389671361502347, 1, 0.08450704225352113, 1])]);
    this.knownGestureIds.push('S');
    this.knownGestures.push([Path.fromCoordinatesArray([0.023715415019762844, 1, 0.023715415019762844, 0.9883720930232558, 0.019762845849802372, 0.9738372093023255, 0.011857707509881422, 0.936046511627907, 0.011857707509881422, 0.8924418604651163, 0.007905138339920948, 0.8808139534883721, 0.007905138339920948, 0.813953488372093, 0.011857707509881422, 0.7703488372093024, 0.011857707509881422, 0.7093023255813954, 0.015810276679841896, 0.6918604651162791, 0.015810276679841896, 0.6656976744186046, 0.019762845849802372, 0.6337209302325582, 0.023715415019762844, 0.6162790697674418, 0.023715415019762844, 0.5959302325581395, 0.02766798418972332, 0.5784883720930233, 0.02766798418972332, 0.5174418604651163, 0.03162055335968379, 0.5, 0.03557312252964427, 0.47674418604651164, 0.039525691699604744, 0.45058139534883723, 0.04743083003952569, 0.4186046511627907, 0.04743083003952569, 0.29069767441860467, 0.043478260869565216, 0.26453488372093026, 0.043478260869565216, 0.2441860465116279, 0.039525691699604744, 0.22093023255813954, 0.039525691699604744, 0.2063953488372093, 0.03557312252964427, 0.19476744186046513, 0.02766798418972332, 0.15988372093023256, 0.019762845849802372, 0.14244186046511628, 0.015810276679841896, 0.12790697674418605, 0.015810276679841896, 0.11337209302325581, 0.011857707509881422, 0.09593023255813954, 0.011857707509881422, 0.08139534883720931, 0.007905138339920948, 0.06976744186046512, 0.007905138339920948, 0.0436046511627907, 0.003952569169960474, 0.020348837209302327, 0.003952569169960474, 0, 0, 0, 0.007905138339920948, 0.005813953488372093, 0.011857707509881422, 0.014534883720930232, 0.015810276679841896, 0.02616279069767442, 0.023715415019762844, 0.03488372093023256, 0.02766798418972332, 0.0436046511627907, 0.03557312252964427, 0.055232558139534885, 0.04743083003952569, 0.06976744186046512, 0.06324110671936758, 0.09302325581395349, 0.07114624505928854, 0.10174418604651163, 0.07905138339920949, 0.11627906976744186, 0.08695652173913043, 0.12790697674418605, 0.09090909090909091, 0.14534883720930233, 0.09486166007905138, 0.15406976744186046, 0.09881422924901186, 0.15988372093023256, 0.1067193675889328, 0.1686046511627907, 0.11857707509881422, 0.18313953488372092, 0.12648221343873517, 0.19476744186046513, 0.1422924901185771, 0.22093023255813954, 0.15019762845849802, 0.23546511627906977, 0.1541501976284585, 0.2441860465116279, 0.16205533596837945, 0.25290697674418605, 0.16996047430830039, 0.26453488372093026, 0.18972332015810275, 0.29069767441860467, 0.21739130434782608, 0.3226744186046512, 0.23715415019762845, 0.3430232558139535, 0.2608695652173913, 0.36627906976744184, 0.2845849802371542, 0.39244186046511625, 0.31225296442687744, 0.41569767441860467, 0.3241106719367589, 0.4273255813953488, 0.33201581027667987, 0.438953488372093, 0.33992094861660077, 0.4476744186046512, 0.34782608695652173, 0.45930232558139533, 0.3715415019762846, 0.47674418604651164, 0.3952569169960474, 0.5058139534883721, 0.4031620553359684, 0.5116279069767442, 0.4189723320158103, 0.5261627906976745, 0.43873517786561267, 0.5436046511627907, 0.4505928853754941, 0.5581395348837209, 0.4743083003952569, 0.5784883720930233, 0.5019762845849802, 0.6046511627906976, 0.525691699604743, 0.6308139534883721, 0.5652173913043478, 0.6569767441860465, 0.5889328063241107, 0.6744186046511628, 0.6205533596837944, 0.6918604651162791, 0.6245059288537549, 0.6976744186046512, 0.6442687747035574, 0.7209302325581395, 0.6521739130434783, 0.7267441860465116, 0.6640316205533597, 0.7441860465116279, 0.6798418972332015, 0.7616279069767442, 0.691699604743083, 0.7732558139534884, 0.6956521739130435, 0.7790697674418605, 0.7035573122529645, 0.7848837209302325, 0.7114624505928854, 0.7965116279069767, 0.7154150197628458, 0.7994186046511628, 0.7193675889328063, 0.8052325581395349, 0.7233201581027668, 0.8081395348837209, 0.7272727272727273, 0.813953488372093, 0.7430830039525692, 0.8255813953488372, 0.766798418972332, 0.8401162790697675, 0.8063241106719368, 0.8633720930232558, 0.8221343873517787, 0.877906976744186, 0.8379446640316206, 0.8866279069767442, 0.8458498023715415, 0.8924418604651163, 0.8537549407114624, 0.8953488372093024, 0.857707509881423, 0.9011627906976745, 0.8656126482213439, 0.9098837209302325, 0.8814229249011858, 0.9215116279069767, 0.8853754940711462, 0.9273255813953488, 0.9011857707509882, 0.938953488372093, 0.9090909090909091, 0.9505813953488372, 0.9169960474308301, 0.9563953488372093, 0.924901185770751, 0.9651162790697675, 0.9367588932806324, 0.9825581395348837, 0.9565217391304348, 0.997093023255814, 0.9683794466403162, 0.997093023255814, 0.9683794466403162, 1, 0.9683794466403162, 0.997093023255814, 0.9723320158102767, 0.9883720930232558, 0.9723320158102767, 0.9767441860465116, 0.9762845849802372, 0.9738372093023255, 0.9762845849802372, 0.9593023255813954, 0.9802371541501976, 0.9534883720930233, 0.9802371541501976, 0.9127906976744186, 0.9881422924901185, 0.8953488372093024, 0.9920948616600791, 0.8808139534883721, 0.9920948616600791, 0.8488372093023255, 0.9960474308300395, 0.8313953488372093, 0.9960474308300395, 0.7965116279069767, 1, 0.7819767441860465, 1, 0.6744186046511628, 0.9960474308300395, 0.6656976744186046, 0.9920948616600791, 0.6482558139534884, 0.9881422924901185, 0.6366279069767442, 0.9881422924901185, 0.6133720930232558, 0.9841897233201581, 0.6017441860465116, 0.9802371541501976, 0.5872093023255814, 0.9802371541501976, 0.561046511627907, 0.9762845849802372, 0.5552325581395349, 0.9762845849802372, 0.4622093023255814, 0.9802371541501976, 0.44476744186046513, 0.9802371541501976, 0.4273255813953488, 0.9920948616600791, 0.39244186046511625, 0.9960474308300395, 0.37790697674418605, 0.9960474308300395, 0.31976744186046513, 0.9920948616600791, 0.3081395348837209, 0.9920948616600791, 0.2180232558139535, 0.9881422924901185, 0.20348837209302326, 0.9881422924901185, 0.18023255813953487, 0.9802371541501976, 0.1511627906976744, 0.9802371541501976, 0.14825581395348839, 0.9683794466403162, 0.12790697674418605, 0.9644268774703557, 0.11337209302325581, 0.9644268774703557, 0.0872093023255814, 0.9604743083003953, 0.07848837209302326, 0.9604743083003953, 0.05232558139534884, 0.9565217391304348, 0.046511627906976744, 0.9565217391304348, 0.00872093023255814])]);
    this.knownGestureIds.push('N');
    this.knownGestures.push([Path.fromCoordinatesArray([0.00823045267489712, 0, 0.00823045267489712, 0.02601156069364162, 0.012345679012345678, 0.031791907514450865, 0.012345679012345678, 0.04046242774566474, 0.01646090534979424, 0.049132947976878616, 0.01646090534979424, 0.24277456647398843, 0.00823045267489712, 0.27167630057803466, 0.00823045267489712, 0.30057803468208094, 0.00411522633744856, 0.3236994219653179, 0.00411522633744856, 0.5751445086705202, 0, 0.6098265895953757, 0.00411522633744856, 0.6445086705202312, 0.00411522633744856, 0.9075144508670521, 0.00823045267489712, 0.9132947976878613, 0.00823045267489712, 0.9364161849710982, 0.012345679012345678, 0.9421965317919075, 0.012345679012345678, 0.9566473988439307, 0.01646090534979424, 0.9595375722543352, 0.01646090534979424, 0.976878612716763, 0.037037037037037035, 0.976878612716763, 0.04938271604938271, 0.9739884393063584, 0.3868312757201646, 0.9739884393063584, 0.4074074074074074, 0.976878612716763, 0.4444444444444444, 0.976878612716763, 0.45267489711934156, 0.9797687861271677, 0.46502057613168724, 0.9797687861271677, 0.4897119341563786, 0.9826589595375722, 0.5185185185185185, 0.9855491329479769, 0.5473251028806584, 0.9913294797687862, 0.5637860082304527, 0.9913294797687862, 0.5802469135802469, 0.9942196531791907, 0.6337448559670782, 0.9942196531791907, 0.6748971193415638, 0.9971098265895953, 0.8271604938271605, 0.9971098265895953, 0.8395061728395061, 1, 0.897119341563786, 1, 0.9135802469135802, 0.9971098265895953, 0.9218106995884774, 0.9971098265895953, 0.9382716049382716, 0.9942196531791907, 0.9876543209876543, 0.9942196531791907, 0.9876543209876543, 0.9971098265895953, 1, 0.9971098265895953])]);
    this.knownGestureIds.push('L');
    this.knownGestures.push([Path.fromCoordinatesArray([0, 0.07692307692307693, 0.14166666666666666, 0.01282051282051282, 0.18333333333333332, 0.00641025641025641, 0.20833333333333334, 0.003205128205128205, 0.26666666666666666, 0, 0.37083333333333335, 0, 0.49583333333333335, 0.02564102564102564, 0.5666666666666667, 0.041666666666666664, 0.65, 0.060897435897435896, 0.7291666666666666, 0.07692307692307693, 0.7875, 0.09615384615384616, 0.8291666666666667, 0.12179487179487179, 0.8708333333333333, 0.14423076923076922, 0.9041666666666667, 0.16666666666666666, 0.9375, 0.19230769230769232, 0.9458333333333333, 0.20192307692307693, 0.9583333333333334, 0.21474358974358973, 0.9625, 0.22435897435897437, 0.9625, 0.28205128205128205, 0.9583333333333334, 0.30448717948717946, 0.9458333333333333, 0.3333333333333333, 0.9291666666666667, 0.36217948717948717, 0.9083333333333333, 0.38461538461538464, 0.875, 0.40705128205128205, 0.8458333333333333, 0.42628205128205127, 0.825, 0.4391025641025641, 0.7958333333333333, 0.4551282051282051, 0.7541666666666667, 0.46794871794871795, 0.7291666666666666, 0.47435897435897434, 0.6958333333333333, 0.4807692307692308, 0.6583333333333333, 0.48717948717948717, 0.5833333333333334, 0.48717948717948717, 0.5625, 0.49038461538461536, 0.5458333333333333, 0.49038461538461536, 0.5041666666666667, 0.4935897435897436, 0.4583333333333333, 0.4935897435897436, 0.44583333333333336, 0.4967948717948718, 0.42916666666666664, 0.5, 0.4166666666666667, 0.5, 0.4125, 0.5032051282051282, 0.475, 0.5032051282051282, 0.5041666666666667, 0.5064102564102564, 0.55, 0.5096153846153846, 0.6208333333333333, 0.5192307692307693, 0.675, 0.5256410256410257, 0.725, 0.5416666666666666, 0.8166666666666667, 0.5673076923076923, 0.8583333333333333, 0.5801282051282052, 0.8833333333333333, 0.5961538461538461, 0.9041666666666667, 0.6057692307692307, 0.9166666666666666, 0.6121794871794872, 0.925, 0.6185897435897436, 0.9291666666666667, 0.6282051282051282, 0.9375, 0.6410256410256411, 0.9416666666666667, 0.6538461538461539, 0.9583333333333334, 0.6762820512820513, 0.975, 0.7019230769230769, 0.9875, 0.7307692307692307, 0.9958333333333333, 0.7403846153846154, 0.9958333333333333, 0.75, 1, 0.7788461538461539, 1, 0.7916666666666666, 0.9958333333333333, 0.8076923076923077, 0.9875, 0.8237179487179487, 0.975, 0.8461538461538461, 0.9541666666666667, 0.8717948717948718, 0.9125, 0.9006410256410257, 0.875, 0.9230769230769231, 0.8083333333333333, 0.9423076923076923, 0.7625, 0.9551282051282052, 0.7166666666666667, 0.9615384615384616, 0.6166666666666667, 0.9743589743589743, 0.5625, 0.9839743589743589, 0.5375, 0.9871794871794872, 0.5083333333333333, 0.9935897435897436, 0.48333333333333334, 0.9967948717948718, 0.45416666666666666, 0.9967948717948718, 0.4083333333333333, 1, 0.25, 1, 0.22083333333333333, 0.9967948717948718, 0.1875, 0.9903846153846154, 0.1625, 0.9871794871794872, 0.13333333333333333, 0.9839743589743589, 0.10833333333333334, 0.9839743589743589, 0.08333333333333333, 0.9775641025641025, 0.07083333333333333, 0.9775641025641025, 0.0625, 0.9711538461538461, 0.05, 0.9711538461538461, 0.0375, 0.967948717948718, 0.029166666666666667, 0.9647435897435898, 0.020833333333333332, 0.9647435897435898])]);
    this.knownGestureIds.push('3');
    this.knownGestures.push([Path.fromCoordinatesArray([0.02880658436213992, 0.057534246575342465, 0.037037037037037035, 0.3013698630136986, 0.037037037037037035, 0.3506849315068493, 0.03292181069958848, 0.3917808219178082, 0.03292181069958848, 0.4547945205479452, 0.02880658436213992, 0.5260273972602739, 0.02880658436213992, 0.6082191780821918, 0.024691358024691357, 0.6246575342465753, 0.02880658436213992, 0.6602739726027397, 0.02880658436213992, 0.7424657534246575, 0.03292181069958848, 0.7671232876712328, 0.03292181069958848, 0.8465753424657534, 0.02880658436213992, 0.8657534246575342, 0.024691358024691357, 0.8904109589041096, 0.024691358024691357, 0.9041095890410958, 0.0205761316872428, 0.9123287671232877, 0.0205761316872428, 0.9232876712328767, 0.01646090534979424, 0.9424657534246575, 0.00823045267489712, 0.9561643835616438, 0.00411522633744856, 0.9726027397260274, 0, 0.9808219178082191, 0, 1, 0, 0.989041095890411, 0.00823045267489712, 0.9698630136986301, 0.0205761316872428, 0.947945205479452, 0.024691358024691357, 0.936986301369863, 0.037037037037037035, 0.9123287671232877, 0.05761316872427984, 0.8876712328767123, 0.09053497942386832, 0.8438356164383561, 0.1111111111111111, 0.8246575342465754, 0.12757201646090535, 0.8027397260273973, 0.14814814814814814, 0.7808219178082192, 0.18930041152263374, 0.7424657534246575, 0.2139917695473251, 0.7205479452054795, 0.2345679012345679, 0.6986301369863014, 0.2551440329218107, 0.6821917808219178, 0.2716049382716049, 0.663013698630137, 0.2880658436213992, 0.6465753424657534, 0.30864197530864196, 0.6273972602739726, 0.3333333333333333, 0.5972602739726027, 0.35390946502057613, 0.5808219178082191, 0.36213991769547327, 0.5726027397260274, 0.37448559670781895, 0.5616438356164384, 0.38271604938271603, 0.5534246575342465, 0.39094650205761317, 0.5424657534246575, 0.4074074074074074, 0.5260273972602739, 0.41975308641975306, 0.5095890410958904, 0.43209876543209874, 0.4986301369863014, 0.448559670781893, 0.4821917808219178, 0.4691358024691358, 0.4684931506849315, 0.48559670781893005, 0.4547945205479452, 0.49794238683127573, 0.4438356164383562, 0.5020576131687243, 0.4410958904109589, 0.5061728395061729, 0.43561643835616437, 0.5061728395061729, 0.4328767123287671, 0.5102880658436214, 0.4383561643835616, 0.51440329218107, 0.44931506849315067, 0.5185185185185185, 0.4575342465753425, 0.522633744855967, 0.4767123287671233, 0.5349794238683128, 0.4958904109589041, 0.5432098765432098, 0.5150684931506849, 0.551440329218107, 0.5397260273972603, 0.5720164609053497, 0.5671232876712329, 0.5843621399176955, 0.589041095890411, 0.6008230452674898, 0.6109589041095891, 0.6255144032921811, 0.6356164383561644, 0.6378600823045267, 0.6465753424657534, 0.6419753086419753, 0.6520547945205479, 0.6460905349794238, 0.6602739726027397, 0.6584362139917695, 0.6767123287671233, 0.6625514403292181, 0.6794520547945205, 0.6666666666666666, 0.684931506849315, 0.6831275720164609, 0.7041095890410959, 0.6954732510288066, 0.7205479452054795, 0.7160493827160493, 0.7342465753424657, 0.7325102880658436, 0.7534246575342466, 0.7654320987654321, 0.7863013698630137, 0.7942386831275721, 0.810958904109589, 0.8148148148148148, 0.8273972602739726, 0.8436213991769548, 0.8547945205479452, 0.8559670781893004, 0.863013698630137, 0.8600823045267489, 0.8712328767123287, 0.8641975308641975, 0.873972602739726, 0.8683127572016461, 0.8794520547945206, 0.8683127572016461, 0.8821917808219178, 0.8765432098765432, 0.8876712328767123, 0.8847736625514403, 0.8958904109589041, 0.8930041152263375, 0.9013698630136986, 0.9094650205761317, 0.9068493150684932, 0.9218106995884774, 0.9205479452054794, 0.934156378600823, 0.9315068493150684, 0.9465020576131687, 0.947945205479452, 0.9547325102880658, 0.9534246575342465, 0.9547325102880658, 0.958904109589041, 0.9670781893004116, 0.9671232876712329, 0.9753086419753086, 0.9698630136986301, 0.9794238683127572, 0.9698630136986301, 0.9835390946502057, 0.9753424657534246, 0.9876543209876543, 0.9780821917808219, 0.9917695473251029, 0.9780821917808219, 0.9917695473251029, 0.9698630136986301, 0.9876543209876543, 0.958904109589041, 0.9876543209876543, 0.947945205479452, 0.9835390946502057, 0.9397260273972603, 0.9835390946502057, 0.9095890410958904, 0.9794238683127572, 0.8904109589041096, 0.9794238683127572, 0.8273972602739726, 0.9753086419753086, 0.7917808219178082, 0.9753086419753086, 0.6438356164383562, 0.9794238683127572, 0.6273972602739726, 0.9794238683127572, 0.5287671232876713, 0.9753086419753086, 0.5150684931506849, 0.9753086419753086, 0.3917808219178082, 0.9794238683127572, 0.3589041095890411, 0.9835390946502057, 0.3424657534246575, 0.9835390946502057, 0.24383561643835616, 0.9876543209876543, 0.23013698630136986, 0.9917695473251029, 0.21095890410958903, 0.9917695473251029, 0.19452054794520549, 0.9958847736625515, 0.1917808219178082, 0.9958847736625515, 0.10410958904109589, 1, 0.0958904109589041, 1, 0.06301369863013699, 0.9958847736625515, 0.057534246575342465, 0.9958847736625515, 0.0136986301369863, 1, 0.00821917808219178, 1, 0])]);
    this.knownGestureIds.push('W');
    this.knownGestures.push([Path.fromCoordinatesArray([0.8879310344827587, 0.08029197080291971, 0.8706896551724138, 0.08029197080291971, 0.8448275862068966, 0.072992700729927, 0.8103448275862069, 0.051094890510948905, 0.75, 0.029197080291970802, 0.6982758620689655, 0.021897810218978103, 0.6206896551724138, 0, 0.5517241379310345, 0, 0.5258620689655172, 0.0072992700729927005, 0.49137931034482757, 0.0072992700729927005, 0.45689655172413796, 0.014598540145985401, 0.41379310344827586, 0.0364963503649635, 0.3448275862068966, 0.06569343065693431, 0.28448275862068967, 0.08029197080291971, 0.22413793103448276, 0.10218978102189781, 0.1810344827586207, 0.12408759124087591, 0.15517241379310345, 0.145985401459854, 0.13793103448275862, 0.1678832116788321, 0.1206896551724138, 0.18248175182481752, 0.10344827586206896, 0.20437956204379562, 0.09482758620689655, 0.22627737226277372, 0.06896551724137931, 0.25547445255474455, 0.034482758620689655, 0.3284671532846715, 0.017241379310344827, 0.3722627737226277, 0.017241379310344827, 0.41605839416058393, 0.008620689655172414, 0.46715328467153283, 0, 0.5109489051094891, 0, 0.6131386861313869, 0.008620689655172414, 0.635036496350365, 0.017241379310344827, 0.6934306569343066, 0.02586206896551724, 0.7372262773722628, 0.034482758620689655, 0.7591240875912408, 0.05172413793103448, 0.7956204379562044, 0.06896551724137931, 0.8394160583941606, 0.09482758620689655, 0.8613138686131386, 0.11206896551724138, 0.8832116788321168, 0.14655172413793102, 0.9124087591240876, 0.16379310344827586, 0.9197080291970803, 0.1810344827586207, 0.9343065693430657, 0.21551724137931033, 0.948905109489051, 0.2413793103448276, 0.9635036496350365, 0.25862068965517243, 0.9635036496350365, 0.29310344827586204, 0.9708029197080292, 0.3103448275862069, 0.9781021897810219, 0.3448275862068966, 0.9781021897810219, 0.41379310344827586, 0.9927007299270073, 0.47413793103448276, 0.9927007299270073, 0.5344827586206896, 1, 0.6293103448275862, 1, 0.6637931034482759, 0.9927007299270073, 0.6810344827586207, 0.9927007299270073, 0.6982758620689655, 0.9854014598540146, 0.7155172413793104, 0.9854014598540146, 0.7413793103448276, 0.9781021897810219, 0.7586206896551724, 0.9708029197080292, 0.7844827586206896, 0.9708029197080292, 0.8362068965517241, 0.9562043795620438, 0.853448275862069, 0.9416058394160584, 0.8706896551724138, 0.9343065693430657, 0.8793103448275862, 0.9343065693430657, 0.8793103448275862, 0.927007299270073, 0.896551724137931, 0.9124087591240876, 0.9137931034482759, 0.9124087591240876, 0.9224137931034483, 0.9051094890510949, 0.9224137931034483, 0.8978102189781022, 0.9310344827586207, 0.8905109489051095, 0.9310344827586207, 0.8832116788321168, 0.9482758620689655, 0.8759124087591241, 0.9568965517241379, 0.8613138686131386, 0.9827586206896551, 0.8394160583941606, 0.9827586206896551, 0.8248175182481752, 0.9913793103448276, 0.8175182481751825, 0.9913793103448276, 0.8102189781021898, 1, 0.8029197080291971, 1, 0.7956204379562044])]);
    this.knownGestureIds.push('C');
    this.knownGestures.push([Path.fromCoordinatesArray([0.7362637362637363, 0.0056179775280898875, 0.7142857142857143, 0.0056179775280898875, 0.6373626373626373, 0, 0.5604395604395604, 0, 0.4835164835164835, 0.0056179775280898875, 0.4065934065934066, 0.016853932584269662, 0.3626373626373626, 0.02247191011235955, 0.3076923076923077, 0.033707865168539325, 0.27472527472527475, 0.03932584269662921, 0.25274725274725274, 0.03932584269662921, 0.23076923076923078, 0.0449438202247191, 0.17582417582417584, 0.06179775280898876, 0.14285714285714285, 0.06741573033707865, 0.0989010989010989, 0.07303370786516854, 0.07692307692307693, 0.08426966292134831, 0.054945054945054944, 0.0898876404494382, 0.054945054945054944, 0.09550561797752809, 0.04395604395604396, 0.10674157303370786, 0.04395604395604396, 0.12359550561797752, 0.03296703296703297, 0.1348314606741573, 0.03296703296703297, 0.16292134831460675, 0.02197802197802198, 0.1797752808988764, 0.02197802197802198, 0.19662921348314608, 0.01098901098901099, 0.2247191011235955, 0.01098901098901099, 0.2303370786516854, 0, 0.25842696629213485, 0, 0.2808988764044944, 0.01098901098901099, 0.30337078651685395, 0.01098901098901099, 0.3651685393258427, 0.02197802197802198, 0.37640449438202245, 0.02197802197802198, 0.398876404494382, 0.04395604395604396, 0.4101123595505618, 0.04395604395604396, 0.42134831460674155, 0.054945054945054944, 0.43258426966292135, 0.06593406593406594, 0.43820224719101125, 0.07692307692307693, 0.449438202247191, 0.10989010989010989, 0.4606741573033708, 0.15384615384615385, 0.48314606741573035, 0.2087912087912088, 0.5056179775280899, 0.25274725274725274, 0.5168539325842697, 0.3076923076923077, 0.5224719101123596, 0.34065934065934067, 0.5280898876404494, 0.3956043956043956, 0.5337078651685393, 0.4945054945054945, 0.5337078651685393, 0.5164835164835165, 0.5393258426966292, 0.6263736263736264, 0.5393258426966292, 0.6703296703296703, 0.5449438202247191, 0.7252747252747253, 0.550561797752809, 0.7802197802197802, 0.550561797752809, 0.8021978021978022, 0.5561797752808989, 0.8461538461538461, 0.5561797752808989, 0.8901098901098901, 0.5617977528089888, 0.9120879120879121, 0.5617977528089888, 0.26373626373626374, 0.5617977528089888, 0.26373626373626374, 0.5674157303370787, 0.24175824175824176, 0.5730337078651685, 0.23076923076923078, 0.5786516853932584, 0.2087912087912088, 0.5786516853932584, 0.2087912087912088, 0.5842696629213483, 0.1978021978021978, 0.5898876404494382, 0.17582417582417584, 0.6123595505617978, 0.15384615384615385, 0.6235955056179775, 0.13186813186813187, 0.6460674157303371, 0.12087912087912088, 0.651685393258427, 0.12087912087912088, 0.6797752808988764, 0.10989010989010989, 0.6966292134831461, 0.10989010989010989, 0.7303370786516854, 0.12087912087912088, 0.7471910112359551, 0.12087912087912088, 0.7752808988764045, 0.13186813186813187, 0.7921348314606742, 0.13186813186813187, 0.8146067415730337, 0.14285714285714285, 0.8258426966292135, 0.14285714285714285, 0.8370786516853933, 0.18681318681318682, 0.8820224719101124, 0.18681318681318682, 0.8932584269662921, 0.2087912087912088, 0.9157303370786517, 0.23076923076923078, 0.9325842696629213, 0.24175824175824176, 0.9438202247191011, 0.24175824175824176, 0.9550561797752809, 0.26373626373626374, 0.9662921348314607, 0.2857142857142857, 0.9719101123595506, 0.2967032967032967, 0.9775280898876404, 0.32967032967032966, 0.9831460674157303, 0.34065934065934067, 0.9831460674157303, 0.3516483516483517, 0.9887640449438202, 0.5054945054945055, 0.9887640449438202, 0.5274725274725275, 0.9943820224719101, 0.7802197802197802, 0.9943820224719101, 0.8021978021978022, 1, 1, 1])]);
    this.knownGestureIds.push('E');
    this.knownGestures.push([Path.fromCoordinatesArray([0.944954128440367, 0, 0.9541284403669725, 0, 0.9541284403669725, 0.005235602094240838, 0.963302752293578, 0.015706806282722512, 0.963302752293578, 0.020942408376963352, 0.981651376146789, 0.03664921465968586, 0.981651376146789, 0.14136125654450263, 0.9908256880733946, 0.17277486910994763, 0.9908256880733946, 0.29842931937172773, 1, 0.33507853403141363, 1, 0.43455497382198954, 0.9908256880733946, 0.47643979057591623, 0.9908256880733946, 0.5078534031413613, 0.981651376146789, 0.5445026178010471, 0.981651376146789, 0.581151832460733, 0.9724770642201835, 0.6178010471204188, 0.9724770642201835, 0.6963350785340314, 0.963302752293578, 0.7329842931937173, 0.9541284403669725, 0.7539267015706806, 0.944954128440367, 0.7801047120418848, 0.926605504587156, 0.7958115183246073, 0.9174311926605505, 0.8167539267015707, 0.9174311926605505, 0.8324607329842932, 0.8990825688073395, 0.8481675392670157, 0.8807339449541285, 0.8691099476439791, 0.8715596330275229, 0.8848167539267016, 0.8623853211009175, 0.8952879581151832, 0.8348623853211009, 0.9109947643979057, 0.8256880733944955, 0.9214659685863874, 0.7522935779816514, 0.9424083769633508, 0.7247706422018348, 0.9476439790575916, 0.6972477064220184, 0.9581151832460733, 0.6697247706422018, 0.9633507853403142, 0.6330275229357798, 0.9685863874345549, 0.5871559633027523, 0.9738219895287958, 0.5321100917431193, 0.9842931937172775, 0.45871559633027525, 0.9895287958115183, 0.3669724770642202, 1, 0.28440366972477066, 1, 0.1743119266055046, 0.93717277486911, 0.1743119266055046, 0.9267015706806283, 0.1559633027522936, 0.9057591623036649, 0.1559633027522936, 0.8952879581151832, 0.14678899082568808, 0.8848167539267016, 0.14678899082568808, 0.8743455497382199, 0.13761467889908258, 0.8586387434554974, 0.11926605504587157, 0.8429319371727748, 0.10091743119266056, 0.8219895287958116, 0.08256880733944955, 0.806282722513089, 0.06422018348623854, 0.7643979057591623, 0.045871559633027525, 0.743455497382199, 0.03669724770642202, 0.7225130890052356, 0.01834862385321101, 0.6910994764397905, 0.01834862385321101, 0.6596858638743456, 0.009174311926605505, 0.6544502617801047, 0.009174311926605505, 0.6073298429319371, 0, 0.6020942408376964])]);
    this.knownGestureIds.push('J');
    this.knownGestures.push([Path.fromCoordinatesArray([0, 0, 0.024922118380062305, 0.055408970976253295, 0.03115264797507788, 0.0712401055408971, 0.037383177570093455, 0.08443271767810026, 0.0529595015576324, 0.11345646437994723, 0.06542056074766354, 0.13984168865435356, 0.07476635514018691, 0.15303430079155672, 0.09034267912772585, 0.17941952506596306, 0.11214953271028037, 0.21108179419525067, 0.1277258566978193, 0.24010554089709762, 0.14641744548286603, 0.2770448548812665, 0.16822429906542055, 0.3087071240105541, 0.19937694704049844, 0.36675461741424803, 0.22429906542056074, 0.41688654353562005, 0.24610591900311526, 0.45118733509234826, 0.2585669781931464, 0.48548812664907653, 0.2803738317757009, 0.5145118733509235, 0.29283489096573206, 0.5435356200527705, 0.308411214953271, 0.5699208443271768, 0.32087227414330216, 0.5963060686015831, 0.3364485981308411, 0.6279683377308707, 0.34579439252336447, 0.6437994722955145, 0.35514018691588783, 0.6701846965699209, 0.3707165109034268, 0.7018469656992085, 0.38317757009345793, 0.7203166226912929, 0.3862928348909657, 0.7361477572559367, 0.3925233644859813, 0.7546174142480211, 0.3987538940809969, 0.7757255936675461, 0.411214953271028, 0.8126649076517151, 0.43613707165109034, 0.8654353562005277, 0.4485981308411215, 0.8865435356200527, 0.45794392523364486, 0.9076517150395779, 0.46417445482866043, 0.920844327176781, 0.4672897196261682, 0.9366754617414248, 0.470404984423676, 0.9472295514511874, 0.4766355140186916, 0.9551451187335093, 0.48286604361370716, 0.9683377308707124, 0.48598130841121495, 0.9762532981530343, 0.4953271028037383, 0.9841688654353562, 0.5046728971962616, 1, 0.5046728971962616, 0.9920844327176781, 0.5109034267912772, 0.9815303430079155, 0.5264797507788161, 0.9445910290237467, 0.5420560747663551, 0.9023746701846965, 0.5638629283489096, 0.8601583113456465, 0.5825545171339563, 0.8232189973614775, 0.6137071651090342, 0.7493403693931399, 0.6199376947040498, 0.7308707124010554, 0.6510903426791277, 0.6517150395778364, 0.660436137071651, 0.6121372031662269, 0.67601246105919, 0.575197889182058, 0.6884735202492211, 0.5435356200527705, 0.6978193146417445, 0.5145118733509235, 0.7071651090342679, 0.49076517150395776, 0.7227414330218068, 0.46965699208443273, 0.7289719626168224, 0.45382585751978893, 0.7414330218068536, 0.41952506596306066, 0.7570093457943925, 0.38522427440633245, 0.7725856697819314, 0.36147757255936674, 0.7850467289719626, 0.33509234828496043, 0.8006230529595015, 0.30606860158311344, 0.8130841121495327, 0.28232189973614774, 0.8255451713395638, 0.2559366754617414, 0.8442367601246106, 0.22955145118733508, 0.8535825545171339, 0.20844327176781002, 0.8660436137071651, 0.18997361477572558, 0.8722741433021807, 0.1741424802110818, 0.881619937694704, 0.16094986807387862, 0.8940809968847352, 0.1345646437994723, 0.9127725856697819, 0.11345646437994723, 0.9158878504672897, 0.10290237467018469, 0.9252336448598131, 0.08970976253298153, 0.9376947040498442, 0.079155672823219, 0.9501557632398754, 0.0712401055408971, 0.956386292834891, 0.0633245382585752, 0.9595015576323987, 0.06068601583113457, 0.9595015576323987, 0.05804749340369393, 0.9688473520249221, 0.05013192612137203, 0.9750778816199377, 0.04221635883905013, 0.9844236760124611, 0.03430079155672823, 0.9875389408099688, 0.029023746701846966, 0.9906542056074766, 0.026385224274406333, 0.9906542056074766, 0.021108179419525065, 0.9937694704049844, 0.018469656992084433, 1, 0.010554089709762533])]);
    this.knownGestureIds.push('V');
    this.knownGestures.push([Path.fromCoordinatesArray([0, 0, 0, 1]), Path.fromCoordinatesArray([1, 0, 1, 1])]);
    this.knownGestureIds.push('double-stroke-vertical');
  }

  startRecording(event: MouseEvent): void {
    // mousedown

    if (!this._isRecording) {
      this._isRecording = true;
      this.currentStroke = [];
      this.recordPoint(event);
    }
  }

  stopRecording(): String {
    // mouseup
    if (this._isRecording) {
      this._isRecording = false;

      var patht: Path = new Path;
      var path: Path = patht.fromPoints(this.currentStroke, false, true);

      if (path.length >= this.minimumLength) {

        path.simplify();
        this.previousStrokesRaw.push(path);

        var pathNormalized: Path = path.clone();
        pathNormalized.normalize();

        this.previousStrokesNormalized.push(pathNormalized);

        if (this.previousStrokesRaw.length > this.maxStrokes) {
          this.previousStrokesRaw.splice(0, this.previousStrokesRaw.length - this.maxStrokes);
          this.previousStrokesNormalized.splice(0, this.previousStrokesNormalized.length - this.maxStrokes);
        }

        this.previousGestureId = this.findClosestGestureId();
        console.log('Gesture:', this.previousGestureId);
        return this.previousGestureId;

      }
      // console.log(`Too Short`, path.points.length);
      return 'Too Short ' + path.points.length;
    }
    // console.log('no match');
    return 'No Match';

  }

  recordPoint(event: MouseEvent): void {
    // mousemove
    if (this._isRecording) {
      this.currentStroke.push(new Point(event.clientX, event.clientY));
    }
  }

  findClosestGestureId(): String {
    // Find the pre-recorded gesture that's closest to the one just drawn
//    var ti:uint = getTimerUInt();

    var maximumError: number = 0.6;
    var pathRect: Rectangle;
    var currPath: Path;
    var fullPathRect: Rectangle;
    var pathAspectRatio: number;
    var gestureAspectRatio: number = 1080 / 1920; // Always assumes the recorded gesture is 9:16
    var normalizedPaths: Path[] = new Array();
    //var normalizedPathBounds:Vector.<Rectangle>;

    var i: number, j: number;
    var closestPathSimilarity: Number = 0;
    var similarity: number = 0;
    var closestPath: number = -1;
    for (i = 0; i < this.knownGestures.length; i++) {
      if (this.knownGestures[i].length <= this.previousStrokesRaw.length) {
        // Check this
        if (this.knownGestures[i].length == 1) {
          // Single stroke gesture

          pathRect = this.previousStrokesRaw[this.previousStrokesNormalized.length - 1].getBounds();
          if (pathRect.width >= this.minimumWidth && pathRect.height >= this.minimumHeight) {
            similarity = this.knownGestures[i][0].getSimilarity(this.previousStrokesNormalized[this.previousStrokesNormalized.length - 1]);

            // Add aspect ratio
            pathAspectRatio = pathRect.width / pathRect.height;
            similarity += ((pathAspectRatio > gestureAspectRatio ? pathAspectRatio / gestureAspectRatio : gestureAspectRatio / pathAspectRatio) - 1) / 10;
          }

        } else {
          // Multi-stroke gesture
          similarity = 0;

          // Creates one normalized version of all path
          fullPathRect = null;
          for (j = 0; j < this.knownGestures[i].length; j++) {
            currPath = this.previousStrokesRaw[this.previousStrokesRaw.length - this.knownGestures[i].length + j]; // Will normalize later
            pathRect = currPath.getBounds();
            normalizedPaths.push(currPath);
            // normalizedPathBounds.push(pathRect);
            if (fullPathRect == null) {
              // First rect
              fullPathRect = pathRect;
            } else {
              // Additional rect, just merge
              if (pathRect.x < fullPathRect.x) fullPathRect.x = pathRect.x;
              if (pathRect.y < fullPathRect.y) fullPathRect.y = pathRect.y;
              if (pathRect.right > fullPathRect.right) fullPathRect.right = pathRect.right;
              if (pathRect.bottom > fullPathRect.bottom) fullPathRect.bottom = pathRect.bottom;
            }
          }

          // Knowing the size, normalizes all paths
          for (j = 0; j < normalizedPaths.length; j++) {
            normalizedPaths[j].translate(-fullPathRect.left, -fullPathRect.top);
            normalizedPaths[j].scale(1 / fullPathRect.width, 1 / fullPathRect.height);
          }

          // Finally, compares all strokes
          for (j = 0; j < this.knownGestures[i].length; j++) {
            similarity += this.knownGestures[i][j].getSimilarity(normalizedPaths[j]);
          }

          // Normalize similarity
          similarity /= this.knownGestures[i].length;

          // Add aspect ratio
          pathAspectRatio = fullPathRect.width / fullPathRect.height;
          similarity += ((pathAspectRatio > gestureAspectRatio ? pathAspectRatio / gestureAspectRatio : gestureAspectRatio / pathAspectRatio) - 1) / 10;
        }

        if (!isNaN(similarity) && similarity <= maximumError && (similarity < closestPathSimilarity || closestPath == -1)) {
          // This one is closer
          closestPathSimilarity = similarity;
          closestPath = i;
        }

      }
    }

    //debug("Spent " + (getTimer() - ti) + "ms to recognize gesture -- closestPathSimilarity = " + closestPathSimilarity);

    return closestPath > -1 ? this.knownGestureIds[closestPath] : 'No Match';
  }
}
